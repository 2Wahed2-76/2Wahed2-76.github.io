// JavaScript pour le tri et l'animation d'apparition des films

document.addEventListener("DOMContentLoaded", function() {
    const sortBySelect = document.getElementById('section-3-film-sort-select');
    const movieList = document.getElementById('section-3-movie-list');
    const movies = Array.from(movieList.children);
  
    // Fonction pour trier les films
    function sortMovies() {
      const sortBy = sortBySelect.value;
      let sortedMovies = [];
  
      if (sortBy === 'popularity') {
        sortedMovies = movies.sort((a, b) => {
          return b.getAttribute('data-movie-popularity') - a.getAttribute('data-movie-popularity');
        });
      } else if (sortBy === 'release-date') {
        sortedMovies = movies.sort((a, b) => {
          return new Date(b.getAttribute('data-movie-release-date')) - new Date(a.getAttribute('data-movie-release-date'));
        });
      }
  
      // Vider la liste des films et ajouter les films triés
      movieList.innerHTML = '';
      sortedMovies.forEach(movie => {
        movieList.appendChild(movie);
        setTimeout(() => {
          movie.classList.add('show');
        }, 100);  // Appliquer l'animation progressivement
      });
    }
  
    // Initialisation: tri par défaut et apparition des films
    sortMovies();
  
    // Écouter les changements dans la sélection de tri
    sortBySelect.addEventListener('change', sortMovies);
  });
  